# Powder-Trickler-Tank
Автоматический триклер для механических весов.
Небольшое демо: https://youtu.be/KGa8Uno5rXU


## Некоторые особенности

1. Оптодатчики фиксируют положение намного точнее человеческого глаза, так что повторяемость навески заметно улучшается.
Но если весы кривые сами по себе то чудес ждать нет смысла. 
2. Триклер не имеет никакого понятия что вы выставили на весах. И при первом прогоне, на максимальной скорости, оценивает время от старта до начала движения весов.
После первого "калибровочного" прогона триклер уже знает тайминг и притормаживает до начала движения весов, начиная отмерять навеску согласно заданному на весах значению.
3. Я устал постоянно пересыпать порох в диспенср, триклер, а потом обратно. Поэтому голова триклера сделана съемной с резьбой под стандартную бутылку. 
4. А статикой на эбанит? - Я без понятия. Бутылка из PETG, корпус из PETG, разьем Type-C землей на корпусе, по идее не должно...

## Реализованные функции

### Работа без подключенных датчиков 
 1. Разовое нажатие на клнопку с удержанием - минимальная скорость 
 2. Двойное нажатие с удержанием - средняя скорость 
 3. Тройное нажатие с удержанием - максимальная скорость
 4. Можно крутить руками если вдруг электричество кончилось

### Работа с подключенными датчиками
 1. Цикл работы запускается одиночным нажатием на кнопку и заканчивается звуковым сигналом. 
 2. До звукового сигнала трогать весы нельзя - триклер продолжит работать пока не будет замкнут верхний оптодатчик или нажата кнопка.
 3. При смене навески - необходимо сбросить калибровку таймера:
      - зажать кнопку на 4 сек до звукового сигнала
      - или переподключить питание (в текущей версии прошивки в памяти ничего не сохраняется) 
      
## Сборка 

### Модели для печати:
1. Непосредственно триклер: https://www.thingiverse.com/thing:4752507
2. Крепление датчиков к RCBS 505 - https://www.thingiverse.com/thing:4752516 (крепится к весам на двусторонний скотч)

К другим весам моделей нет и не факт что будут. Но пытливый ум наверняка найдет как установить пару оптодатчиков. Двусторонний скотч и воображение творят чудеса.  

Модели сделаны с минимальными зазорами под плаcтик с минимальной усадкой типа PETG.
Будьте готовы вооружиться скальпелем, надфилями и цианокрилатом.

Самая не очевидная деталь конструкции - трубка триклера. Я использовал 10см отрезок карбоновой стрелы 6.5мм диаметром (около 5мм внутренний диаметр)

#### [Схема распайки](https://github.com/fenofun/Powder-Trickler-Tank/blob/main/Scheme/Scheme.png)

Для драйвера можно слепить импровизированный шилд как это сделал я, но это не обязательно.


#### [Скетч](https://github.com/fenofun/Powder-Trickler-Tank/blob/main/frimware/Trickler_Tank.ino)

В скетче используются библиотеки товарища [Гайвера](https://github.com/AlexGyver) так что идем в его [репозиторий библиотек](https://github.com/AlexGyver/GyverLibs) и скачиваем GyverStepper и GyverButton. 



